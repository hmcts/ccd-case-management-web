<div *ngIf="(hasResults() || hasDrafts())" class="pagination-top"
     attr.aria-label="{{ getTotalResults() }} results have been found">
  <span class="text-16">Displaying {{ getFirstResult() }} - {{ getLastResult() }} out of {{ getTotalResults() }} results</span>
</div>
<table *ngIf="hasResults() || hasDrafts()">
  <thead>
  <tr>
    <th *ngFor="let col of resultView.columns">
      <table class="search-result-column-header">
        <tr>
          <div class="search-result-column-label" (click)="sort(col)">{{col.label}}</div>
          <div *ngIf="comparator(col)" class="search-result-column-sort">
            <a (click)="sort(col)" class="sort-widget" [innerHTML]="sortWidget(col)" href="javascript:void(0)"></a>
          </div>
        </tr>
      </table>
    </th>
    <th *ngIf="activityEnabled()" style="width: 110px;"></th>
  </tr>
  </thead>
  <tbody>
  <tr *ngFor="let result of resultView.results | ccdSortSearchResult : sortParameters | paginate: { itemsPerPage: paginationPageSize, currentPage: selected.page, totalItems: paginationMetadata.total_results_count }">
    <td *ngFor="let col of resultView.columns; let colIndex = index">
      <a *ngIf="colIndex == 0" routerLink="/case/{{jurisdiction.id}}/{{caseType.id}}/{{result.case_id}}"
         attr.aria-label="go to case with Case reference:{{ result.case_id | ccdCaseReference }}">
        <div class="text-16" [style.visibility]="hideRows ? 'hidden' : 'visible'">
          <ccd-field-read *ngIf="draftPrefixOrGet(col, result); else case_reference" [caseField]="{
                  id: col.case_field_id,
                  label: col.label,
                  field_type: col.case_field_type,
                  value: draftPrefixOrGet(col, result)
            }"></ccd-field-read>
          <ng-template #case_reference>{{result.case_id | ccdCaseReference}}</ng-template>
        </div>
      </a>
      <div *ngIf="colIndex != 0" class="text-16" [style.visibility]="hideRows ? 'hidden' : 'visible'">
        <ccd-field-read [caseField]="{
                id: col.case_field_id,
                label: col.label,
                field_type: col.case_field_type,
                value: hyphenateIfCaseReferenceOrGet(col, result)
          }"></ccd-field-read>
      </div>
    </td>
    <td *ngIf="activityEnabled()">
        <div [style.visibility]="hideRows ? 'hidden' : 'visible'">
          <ccd-activity [caseId]="result.case_id" [displayMode]="ICON"></ccd-activity>
        </div>
    </td>
  </tr>
  </tbody>
</table>
<pagination-controls [style.visibility]="hideRows ? 'hidden' : 'visible'" *ngIf="hasResults()" class="pagination" (pageChange)="goToPage($event)" autoHide="true" maxSize="8" screenReaderPaginationLabel="Pagination" screenReaderPageLabel="page" screenReaderCurrentLabel="You're on page"></pagination-controls>
<div *ngIf="!(hasResults() || hasDrafts())" class="notification">
  No cases found. Try using different filters.
</div>
